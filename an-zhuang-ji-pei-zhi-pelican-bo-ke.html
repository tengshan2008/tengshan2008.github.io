<!DOCTYPE html>
<html lang="en">
<head>
        <title>安装及配置 Pelican 博客</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="https://tengshan2008.github.io/theme/css/main.css" />
        <link href="https://tengshan2008.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Personal Blog Full Atom Feed" />
        <link href="https://tengshan2008.github.io/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Personal Blog Categories Atom Feed" />
</head>
<body>

    <div class="navigation pure-menu pure-menu-horizontal">
        <a href="https://tengshan2008.github.io/" class="pure-menu-heading  pure-menu-link">Personal Blog</a>
        <ul class="pure-menu-list">
            <li class="pure-menu-item"></li>

            <li class="pure-menu-item pure-menu-selected"><a href="https://tengshan2008.github.io/category/default.html" class="pure-menu-link">Default</a></li>
        </ul>
    </div>


<div class="page-container">
    <div class="entry-content">
        <div class="post-meta pure-g">
            <div class="pure-u">
                <a href="https://tengshan2008.github.io/category/default.html"><img src="https://raw.githubusercontent.com/tengshan2008/tengshan2008.github.io/master/images/article-line.png " class="post-avatar" alt="Default"></a>
            </div>
<div class="pure-u-3-4 meta-data">
    <a href="https://tengshan2008.github.io/category/default.html" class="category">Default</a><br />

    <a class="author" href="https://tengshan2008.github.io/author/master.html">Master</a>
    &mdash; <abbr title="2020-01-02T00:00:00+08:00">四 02 一月 2020</abbr>
</div>        </div>
    </div>

    <div class="article-header-container">
        <div class="background-image-container">

            <div class="background-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(https://raw.githubusercontent.com/tengshan2008/tengshan2008.github.io/master/images/JuniperPhoton_2020-01-02_12-00-00.jpg);">
                <img src="https://raw.githubusercontent.com/tengshan2008/tengshan2008.github.io/master/images/JuniperPhoton_2020-01-02_12-00-00.jpg" alt="安装及配置 Pelican 博客">
                <div class="title">
                <h1>
                    安装及配置 Pelican 博客
                </h1>
                </div>
            </div>
        </div>
    </div>

    <div class="entry-content">
        <h1>Pelican</h1>
<p>Pelican 是一种静态博客生成器，包含大量丰富的主题，拥有简单的部署方法。</p>
<h2>1. 准备工作</h2>
<p>为了发布在 GitHub Page 上，需要先新建一个远程仓库 username.github.io 并将该仓库克隆到本地。</p>
<div class="highlight"><pre><span></span>git clone https://github.com/<span class="o">{</span>username<span class="o">}</span>/<span class="o">{</span>username<span class="o">}</span>.github.io.git blog
</pre></div>


<p>由于 Pelican 默认发布 master 分支下的内容，所以，我们将 pelican 项目放到其他分支中。</p>
<div class="highlight"><pre><span></span>git checkout -b <span class="nb">source</span>
</pre></div>


<h2>2. 安装</h2>
<h3>2.1 新建 python 虚拟环境</h3>
<div class="highlight"><pre><span></span><span class="nb">cd</span> blog

python -m venv .venv

<span class="nb">source</span> .venv/bin/activate
</pre></div>


<h3>2.2 安装必要的 python 包</h3>
<div class="highlight"><pre><span></span>python -m pip install pelican markdown ghp-import
</pre></div>


<p>版本信息：</p>
<table>
<thead>
<tr>
<th>Package</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>blinker</td>
<td>1.4</td>
</tr>
<tr>
<td>docutils</td>
<td>0.15.2</td>
</tr>
<tr>
<td>feedgenerator</td>
<td>1.9</td>
</tr>
<tr>
<td>ghp-import</td>
<td>0.5.5</td>
</tr>
<tr>
<td>Jinja2</td>
<td>2.10.3</td>
</tr>
<tr>
<td>Markdown</td>
<td>3.1.1</td>
</tr>
<tr>
<td>MarkupSafe</td>
<td>1.1.1</td>
</tr>
<tr>
<td>pelican</td>
<td>4.2.0</td>
</tr>
<tr>
<td>pip</td>
<td>19.3.1</td>
</tr>
<tr>
<td>Pygments</td>
<td>2.5.2</td>
</tr>
<tr>
<td>python-dateutil</td>
<td>2.8.1</td>
</tr>
<tr>
<td>pytz</td>
<td>2019.3</td>
</tr>
<tr>
<td>setuptools</td>
<td>42.0.2</td>
</tr>
<tr>
<td>six</td>
<td>1.13.0</td>
</tr>
<tr>
<td>Unidecode</td>
<td>1.1.1</td>
</tr>
<tr>
<td>wheel</td>
<td>0.33.6</td>
</tr>
</tbody>
</table>
<h2>3. 配置</h2>
<h3>3.1 新建 pelican 项目</h3>
<div class="highlight"><pre><span></span>pelican-quickstart
</pre></div>


<h3>3.2 填写必要信息</h3>
<p>因为我们要在 GitHub Pages 上使用博客，所以 Do you want to upload 中只在 GitHub Pages 选择 [y]。其他选项根据自己的实际情况填写。</p>
<div class="highlight"><pre><span></span><span class="n">Welcome</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">pelican</span><span class="o">-</span><span class="n">quickstart</span><span class="w"> </span><span class="n">v4</span><span class="mf">.2.0</span><span class="p">.</span><span class="w"></span>

<span class="n">This</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Pelican</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">website</span><span class="p">.</span><span class="w"></span>

<span class="n">Please</span><span class="w"> </span><span class="n">answer</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">questions</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">files</span><span class="w"></span>
<span class="n">needed</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">Pelican</span><span class="p">.</span><span class="w"></span>


<span class="o">&gt;</span><span class="w"> </span><span class="k">Where</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">web</span><span class="w"> </span><span class="n">site</span><span class="vm">?</span><span class="w"> </span><span class="o">[</span><span class="n">.</span><span class="o">]</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">web</span><span class="w"> </span><span class="n">site</span><span class="vm">?</span><span class="w"> </span><span class="n">Blog</span><span class="w"> </span><span class="n">Title</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Who</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">web</span><span class="w"> </span><span class="n">site</span><span class="vm">?</span><span class="w"> </span><span class="n">Blog</span><span class="w"> </span><span class="n">Author</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">language</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">web</span><span class="w"> </span><span class="n">site</span><span class="vm">?</span><span class="w"> </span><span class="o">[</span><span class="n">zh</span><span class="o">]</span><span class="w"> </span><span class="n">en</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">URL</span><span class="w"> </span><span class="k">prefix</span><span class="vm">?</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.,</span><span class="w"> </span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="w">   </span><span class="p">(</span><span class="n">Y</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">URL</span><span class="w"> </span><span class="k">prefix</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">see</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">example</span><span class="p">;</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="k">trailing</span><span class="w"> </span><span class="n">slash</span><span class="p">)</span><span class="w"> </span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">username</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">io</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="n">article</span><span class="w"> </span><span class="n">pagination</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">Y</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">How</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">articles</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="vm">?</span><span class="w"> </span><span class="o">[</span><span class="n">10</span><span class="o">]</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="nc">time</span><span class="w"> </span><span class="k">zone</span><span class="vm">?</span><span class="w"> </span><span class="o">[</span><span class="n">Europe/Paris</span><span class="o">]</span><span class="w"> </span><span class="n">Asia</span><span class="o">/</span><span class="n">Shanghai</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">tasks</span><span class="p">.</span><span class="n">py</span><span class="o">/</span><span class="n">Makefile</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">automate</span><span class="w"> </span><span class="n">generation</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">publishing</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">Y</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">upload</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">FTP</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">upload</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">SSH</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">upload</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">Dropbox</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">upload</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">S3</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">upload</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">Rackspace</span><span class="w"> </span><span class="n">Cloud</span><span class="w"> </span><span class="n">Files</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">upload</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">GitHub</span><span class="w"> </span><span class="n">Pages</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="w"></span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">Is</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">personal</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="p">(</span><span class="n">username</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">io</span><span class="p">)</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="w"></span>
<span class="n">Done</span><span class="p">.</span><span class="w"> </span><span class="n">Your</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="nf">pi</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">temp</span><span class="w"></span>
</pre></div>


<h3>3.3 安装主题</h3>
<p>新建主题目录</p>
<blockquote>
<p>注意：pelican-themes 中包含的众多主题，光是 clone 下来是不行的，会有许多空目录，因为许多主题都是 git submodule，所以需要 submodule update 来更新。<br>
同时，这些主题有的已经不适用于 4.2 版本，需要自己对主题进行部分修补，详见 <a href="https://github.com/getpelican/pelican/pull/2538#issue-257357843">LINK</a></p>
</blockquote>
<div class="highlight"><pre><span></span>git submodule add https://github.com/onur/medius.git themes/medius

git submodule init

git submodule update --init --recursive

pelican-themes --install themes/medius
</pre></div>


<p>修改配置文件</p>
<div class="highlight"><pre><span></span>vim pelicanconf.py
</pre></div>


<p>添加以下内容</p>
<div class="highlight"><pre><span></span><span class="n">THEME</span> <span class="o">=</span> <span class="s1">&#39;themes/medius&#39;</span>
</pre></div>


<h2>4. 创建内容</h2>
<p>在 content 目录下，存放博客文章及各类资源。</p>
<div class="highlight"><pre><span></span><span class="err">website</span>
<span class="err">├── content</span>
<span class="err">│   ├── category</span>
<span class="err">│   │   └── article1.rst</span>
<span class="err">│   ├── article2.md</span>
<span class="err">│   ├── pages</span>
<span class="err">│   │   └── about.md</span>
<span class="err">│   └── images</span>
<span class="err">│       └── author.png</span>
<span class="err">└── pelicanconf.py</span>
</pre></div>


<p>若有静态资源目录，须在配置文件中定义。</p>
<div class="highlight"><pre><span></span>vim pelicanconf.py
</pre></div>


<p>添加以下内容</p>
<div class="highlight"><pre><span></span><span class="n">STATIC_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;images&#39;</span><span class="p">]</span>
</pre></div>


<p>编辑内容参照本博客文章自身。</p>
<h2>5. 调试与部署</h2>
<h3>5.1 本地调试</h3>
<div class="highlight"><pre><span></span><span class="nb">source</span> .venv/bin/activate

make html <span class="o">&amp;&amp;</span> make serve
</pre></div>


<p>本地服务启用，访问 <a href="http://localhost:8000">http://localhost:8000</a></p>
<p>若是需要，提交所有内容。</p>
<div class="highlight"><pre><span></span>git add -A <span class="o">&amp;&amp;</span> git commit -a -m <span class="s1">&#39;initial commit&#39;</span> <span class="o">&amp;&amp;</span> git push --all
</pre></div>


<h3>5.2 部署在 GitHub Pages 上</h3>
<div class="highlight"><pre><span></span><span class="nb">source</span> .venv/bin/activate

make github
</pre></div>


<h2>6. 参考</h2>
<ol>
<li><a href="https://a-slide.github.io/blog/github-pelican">Create a github hosted Pelican blog with a Bootstrap3 theme</a></li>
<li><a href="https://snipcart.com/blog/pelican-blog-tutorial-search-comments">A Pelican Tutorial: Static, Python-Powered Blog with Search &amp; Comments</a></li>
<li><a href="">something</a></li>
</ol>
    </div>

    <footer>
        <div class="tags">
            <a href="https://tengshan2008.github.io/tag/pelican.html">pelican</a>
            <a href="https://tengshan2008.github.io/tag/blog.html">blog</a>
        </div>
        <div class="pure-g post-footer">
            <div class="pure-u-1 pure-u-md-1-2">
                <div class="pure-g poster-info">
                    <div class="pure-u-3-4">
                        <h3 class="author-name"><a href="https://tengshan2008.github.io/author/master.html">Master</a></h3>
                        <p class="author-description">
                        </p>
                    </div>
                </div>
            </div>


            <div class="pure-u-1 pure-u-md-1-2">

                <div class="pure-g post-category-info">
                    <div class="pure-u">
                        <a href="https://tengshan2008.github.io/category/default.html"><img src="https://raw.githubusercontent.com/tengshan2008/tengshan2008.github.io/master/images/article-line.png" alt=""></a>
                    </div>
                    <div class="pure-u-3-4">
                        <h3 class="author-name"><a href="https://tengshan2008.github.io/category/default.html">Default</a></h3>
                        <p class="author-description">
                          默认文章
                        </p>
                    </div>
                </div>

            </div>

        </div>


    </footer>


</div>



    <footer class="index-footer">

        <a href="https://tengshan2008.github.io/" title="Personal Blog">Personal Blog</a>
        <a href="https://tengshan2008.github.io/category/default.html">Default</a>
        <a href="http://getpelican.com/">Pelican</a>
        <a href="http://python.org/">Python.org</a>
        <a href="http://jinja.pocoo.org/">Jinja2</a>

    </footer>

</body>
</html>